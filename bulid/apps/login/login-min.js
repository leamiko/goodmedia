(function(a,c,d){var b=function(){var e={bulidFindPwd:function(){d("#J_FindPwd").live("click",function(){d("#J_LoginForm,#J_FindPwdForm").toggle()});d("#J_BackLogin").live("click",function(){d("#J_LoginForm,#J_FindPwdForm").toggle()});var f='<form id="J_FindPwdForm" style="display:none;"><div class="login_text"><span>昵 称：</span><p><input id="J_FindName" data-v="empty:昵称不能为空" class="login_box J_FindPwdverify" type="text" name="username"><a id="J_BackLogin" href="javascript:void(0);">返回登录</a></p><div class="clear"></div></div><div class="login_text"><span>邮 箱：</span><p><input id="J_FindEmail" data-v="empty:邮箱不能为空|email:请输入正确的邮箱地址" class="login_box J_FindPwdverify" name="email" type="text"></p><div class="clear"></div></div><div class="login_text"><span></span><input type="image" src="http://s1.ifiter.com/v2/static/images/rpassword.gif"/></div></form>';d("#J_LoginForm").after(f)},bathcallbackhand:function(i,h,g){var f=d(g).parent();if(f.next().hasClass("J_checked")){f.next().show().html(h)}else{f.after('<p class="J_checked red" style="padding-left:50px;">'+h+"</p>")}},focushand:function(g){var f=g.parent();if(f.next().hasClass("J_checked")){f.next().hide()}},checkedLogin:function(){var f=new c.widget.verify({form:"#J_LoginForm",cls:".Gverify",blur:true,success:function(h){var g="http://bbs.idongmi.com/bbs/logging.php?action=login&loginsubmit=yes&inajax=1",j=h.username,i=h.password,h={username:j,password:i,loginfield:"username",questionid:0,referer:"",answer:"",formhash:"52c87683"};if(h.cookietime){h.cookietime=h.cookietime}g+="&"+d.param(h);d.ajax({url:"/api/api_getURL2js.jsp?op=login&username="+encodeURIComponent(h.username)+"&pwd="+h.password+"&url="+encodeURIComponent(g),datatype:"xml",success:function(n){var m=d(n).find("root")[0],l=d(m).text();if(l!=""&&!(/\<script/.test(l))){d("#J_Status").text(l)}else{var k=l.match(/src="(.+?)"/g);for(var o=0;o<k.length;o++){var p=k[o].slice(5,k[o].length-1);d.getScript(p)}d("#J_Status").html("欢迎您,"+h.username+',2秒后自动<a href="http://x.idongmi.com/">返回首页</a>');setTimeout(function(){window.location.href="http://x.idongmi.com/"},2000)}},error:function(){d("#J_Status").html("网络超时，请重试")}})},batchcallback:e.bathcallbackhand,focusfn:e.focushand});f.init()},checkedFindPwd:function(){var f=new c.widget.verify({form:"#J_FindPwdForm",cls:".J_FindPwdverify",blur:true,success:function(h){var i=h.username,g=h.email},batchcallback:e.bathcallbackhand,focusfn:e.focushand});f.init()}};return{exports:{login_init:function(){c.widget.use("verify",function(f){e.bulidFindPwd();e.checkedLogin();e.checkedFindPwd()})},register_init:function(){}}}}();if(c&&c.apps){c.apps.login=b}})(window,GM,jQuery);