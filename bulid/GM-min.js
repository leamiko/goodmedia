(function(a,c,b){if(!window.GM){var d={}}d.widget={};d.tools={};d.apps={};d.apps.require=function(e,i){var h=(a.location.href.match("idongmi.com")),g=(h)?"http://x.idongmi.com/static/GM/":"http://172.16.2.215/gm/";var f=g+"bulid/apps/"+e+"/"+e+".js";b(function(){b.getScript(f,function(){if(i){i(d.apps[e]["exports"])}})})};a.GM=d})(window,document,jQuery);(function(a,e,d,c){var b=function(g){var f=function(){return{_init:function(i){var h={wrapId:"J_GM_OverlayWrap",wrapCls:"J_GM_OverlayWrapCls",coverId:"J_GM_Cover",width:null,height:null,content:"",cover:true,drag:false,opacity:0.5};d.extend(h,i);this.config=h}}}();f._init.prototype={fire:function(i,l){var k=this,h=k.config;if(h._destroy){return}if(!e.getElementById(h.wrapId)){var j=d("<div>",{id:h.wrapId});j.appendTo("body").html(h.content);if(i){d("#"+h.wrapId).html(i)}if(h.cover&&d("#"+h.coverId).length==0){k._cover()}}else{if(i){d("#"+h.wrapId).html(i)}d("#"+h.coverId).show();d("#"+h.wrapId).show()}d("#"+h.wrapId).css("display","inline");setTimeout(function(){k.reset(d("#"+h.wrapId).innerWidth(),d("#"+h.wrapId).innerHeight(),h.wrapCls)},10);if(l){l(j)}},opacity:function(i){var j=this,h=j.config;h.opacity=i},reset:function(j,l,i){var m=this,k=m.config;k.width=j;k.height=l;k.wrapCls=i;d("#"+k.wrapId).css({width:j,height:l,"z-index":1000}).addClass(i);m._fix(d("#"+k.wrapId),m)},close:function(j){var i=this,h=i.config;d("#"+h.coverId).hide();d("#"+h.wrapId).hide();d("#"+h.wrapId).css({width:"auto",height:"auto"});if(j){j(d("#"+h.coverId),d("#"+h.wrapId))}},_drag:function(i,h){},_cover:function(){var j=this,i=j.config,k=d("<div>",{id:i.coverId}),h=(d.browser.msie&&d.browser.version=="6.0");k.css({"background-color":"#ccc",opacity:i.opacity,height:e.documentElement.clientHeight,"z-index":999}).prependTo("body");if(h){k.append("<iframe style='width:100%;filter:alpha(opacity=0);z-index:-1;'>");k.find("iframe").css("height",k.height())}j._fixScroll()},_fix:function(l,k){var j=k,i=j.config,h=(d.browser.msie&&d.browser.version=="6.0"),m=d(e).scrollTop();l.css({position:h?"absolute":"fixed",zoom:1,left:"50%",top:h?((e.documentElement.offsetHeight-i.height)/2)+m:"50%","margin-left":-(i.width/2),"margin-top":h?0:-(i.height/2)});d("#"+i.coverId).css({position:h?"absolute":"fixed",left:0,top:h?m:0,width:h?Math.max(e.documentElement.clientWidth,e.body.clientWidth):"100%"})},_fixScroll:function(){var i=this,h=i.config;d(a).bind("scroll resize",{host:i},i._windowBind)},_windowBind:function(i){var h=i.data.host;h._fix(d("#"+h.config.wrapId),h);d("#"+h.config.coverId).css({height:e.documentElement.clientHeight})},destroy:function(){var h=this;config=h.config;d("#"+config.coverId).remove();d("#"+config.wrapId).remove();d(a).unbind("scroll resize",h._windowBind);if(c.tools.overlay){c.tools.overlay=null}}};if(!c.tools.overlay){c.tools.overlay=new f._init(g)}return c.tools.overlay};d.extend({overlay:b})})(window,document,jQuery,GM);(function(a,e,c,b){var d=function(f){var g=function(){var h=function(o){var n=o.wrap,k=o.wrapitem;if(n==""||k==""){return}var p=c(k).eq(0),j,m,l=c(k).size();if(o.direction=="left"){j=p.outerWidth()*l;m=p.outerHeight()}else{if(o.direction=="top"){j=p.outerWidth();m=p.outerHeight()*l}else{return}}var i=c("<div>").css({height:m,width:j,position:"absolute"}).addClass("fixclear");c(n).css({overflow:"hidden",position:"relative",width:p.outerWidth(),height:p.outerHeight()}).prepend(i);c(n).find(k).appendTo(i);c(k).css("float","left");if(c(n).find(".fixclear").length>1){c(n).find(".fixclear").last().remove()}};return{_init:function(j){var i={wrap:"",wrapitem:"",direction:"left",before:function(){},after:function(){},current:0,endflg:true,auto:false,autointerval:3000};c.extend(i,j);this.config=i;this.T=null;h(this.config);if(this.config.auto){this.auto();this.autoEvent()}}}}();g._init.prototype={forward:function(){var j=this,i=j.config,h=c(i.wrap).find(i.wrapitem).length;if(i.endflg){i.endflg=false;i.current++;if(i.current>h-1){i.current=0}j.to(i.current)}},backward:function(){var j=this,i=j.config,h=c(i.wrap).find(i.wrapitem).length;if(i.endflg){i.endflg=false;i.current--;if(i.current<0){i.current=h-1}j.to(i.current)}},to:function(h){var m=this,k=m.config,j={},n=c(k.wrap).find(".fixclear"),i=c(k.wrap).find(k.wrapitem).length;if(h>i||h<0){return}if(k.direction=="left"){j={left:"-"+c(k.wrap).width()*h}}else{if(k.direction=="top"){j={top:"-"+c(k.wrap).height()*h}}}m.before(h);n.animate(j,500,function(){m.after(h);k.endflg=true})},auto:function(){var i=this,h=i.config;i.T=setInterval(function(){i.forward()},h.autointerval)},autoEvent:function(){var i=this,h=i.config;c(h.wrap).live("mouseenter",function(){clearInterval(i.T)}).live("mouseleave",function(){i.auto()})},before:function(j){var i=this,h=i.config;h.before(j)},after:function(j){var i=this,h=i.config;h.after(j)}};return new g._init(f)};c.extend({carousel:d})})(window,document,jQuery,GM);(function(a,e,d,c){var b=function(){var f=function(){return{_init:function(){}}};f.prototype={};return new f._init(cg)}})(window,document,jQuery,GM);(function(a,c,d){var b=function(){return{substitute:function(g,f,e){return g.replace(e||/\\?\{([^{}]+)\}/g,function(i,h){if(i.charAt(0)==="\\"){return i.slice(1)}return(f[h]===undefined)?"":f[h]})}}}();d.extend({substitute:b.substitute})})(window,GM,jQuery);(function(a,c,d){var b=function(h,i,f){if(arguments.length>1&&String(i)!=="[object Object]"){f=jQuery.extend({},f);if(i===null||i===undefined){f.expires=-1}if(typeof f.expires==="number"){var k=f.expires,g=f.expires=new Date();g.setDate(g.getDate()+k)}i=String(i);return(document.cookie=[encodeURIComponent(h),"=",f.raw?i:encodeURIComponent(i),f.expires?"; expires="+f.expires.toUTCString():"",f.path?"; path="+f.path:"",f.domain?"; domain="+f.domain:"",f.secure?"; secure":""].join(""))}f=i||{};var e,j=f.raw?function(l){return l}:decodeURIComponent;return(e=new RegExp("(?:^|; )"+encodeURIComponent(h)+"=([^;]*)").exec(document.cookie))?j(e[1]):null};d.extend({cookie:b})})(window,GM,jQuery);(function(a,b,d){var c=function(){var k=navigator.appVersion.split("MSIE");var l=parseFloat(k[1]);if((l>=5.5)&&(document.body.filters)){for(var g=0;g<document.images.length;g++){var h=document.images[g];var n=h.src.toUpperCase();if(n.substring(n.length-3,n.length)=="PNG"){var j=(h.id)?"id='"+h.id+"' ":"";var o=(h.className)?"class='"+h.className+"' ":"";var f=(h.title)?"title='"+h.title+"' ":"title='"+h.alt+"' ";var m="display:inline-block;"+h.style.cssText;if(h.align=="left"){m="float:left;"+m}if(h.align=="right"){m="float:right;"+m}if(h.parentElement.href){m="cursor:hand;"+m}var e="<span "+j+o+f+' style="width:'+h.width+"px; height:"+h.height+"px;"+m+"filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+h.src+"', sizingMethod='scale');\"></span>";h.outerHTML=e;g=g-1}}}};d.extend({fixpng24:c});if(d.browser.msie&&d.browser.version==6){d(function(){d.fixpng24()})}})(window,GM,jQuery);(function(a,c){var b=function(e){if(!e){return}var d="/course/courseAction.jsp";$.ajax({url:d,data:e,success:function(f){if($.trim(f)==1){alert("分享成功！")}else{alert("网络超时,请重试")}},error:function(){alert("网络超时,请重试")},timeout:5000})};if(c&&c.widget){c.widget.sharetosina=b}})(window,GM);(function(a,c){var b=function(j,i,h,e){var g=["北京|昌平区,朝阳区,崇文区,大兴区,东城区,丰台区,海淀区,门头沟区,石景山区,通州区,西城区,宣武区","长春|朝阳区,二道区,高新区,宽城区,绿园区,南关区","长沙|芙蓉区,开福区,天心区,雨花区,岳麓区","常州|湖塘镇,天宁区,新北区,钟楼区","成都|成华区,金牛区,锦江区,郫县,青羊区,温江县,武侯区,新都区","大连|甘井子区,金州区,开发区,沙河口区,西岗区,中山区","东莞|东城区,虎门镇,南城区,石碣镇,石龙镇,莞城区,万江区","佛山|禅城区,南海区,顺德区","福州|仓山区,鼓楼区,鼓楼新区,晋安区,马尾区,台江区","广州|白云区,番禺区,海珠区,花都区,黄埔区,开发区,荔湾区,萝岗区,天河区,越秀区,增城区","哈尔滨|道里区,道外区,开发区,南岗区,松北区,香坊区,平房区","杭州|滨江区,拱墅区,江干区,西湖区,下城区,萧山区,上城区","呼和浩特|回民区,新城区","济南|高新区,槐荫区,历城区,历下区,市中区,天桥区","嘉兴|秀城区","昆明|盘龙区,五华区,西山区","兰州|城关区,七里河区,西固区","南京|白下区,鼓楼区,建邺区,江宁区,秦淮区,下关区,玄武区,雨花台区","南宁|江南区","宁波|海曙区,江北区,江东区,鄞州区,镇海区","青岛|城阳区,李沧区,市北区,市南区,四方区","上海|宝山区,长宁区,虹口区,黄浦区,嘉定区,金山区,静安区,卢湾区,闵行区,南汇区,浦东区,浦东新区,浦西区,普陀区,青浦区,松江区,徐汇区,杨浦区,闸北区,奉贤区,黄埔区","深圳|宝安区,福田区,龙岗区,罗湖区,南山区,盐田区","沈阳|大东区,和平区,皇姑区,沈河区,铁西区,于洪区","石家庄|长安区,开发区,桥东区,桥西区,新华区,裕华区","苏州|沧浪区,常熟市,工业园区,金阊区,昆山市,平江区,太仓市,吴中区,相城区","太原|小店区","唐山|开平区","天津|东丽区,和平区,河北区,河东区,河西区,红桥区,蓟县,静海县,南开区","温州|龙湾区,鹿城区,瓯海区,瑞安市,永嘉县,新城区","无锡|城东区,城中区,崇安区,惠山区,江阴市,南长区,南闸镇,青阳镇,霞客镇,新区,宜兴市,滨湖区","武汉|汉口区,汉阳区,洪山区,江岸区,江汉区,青山区,武昌区","西安|霸桥区,碑林区,长安区,莲湖区,未央区,新城区,雁塔区,高新区","厦门|海沧区,湖里区,集美区,思明区,同安区","烟台|福山区,开发区,莱山区,芝罘区","郑州|二七区,管城区,惠济区,金水区,郑东新区,中原区","重庆|巴南区,大渡口,江北区,九龙坡区,南岸区,沙坪坝区,渝北区,渝中区","珠海|斗门区,拱北区,金湾区,香洲区"];function f(k){$.each($(k).children(),function(l,m){if(m.value==0){m.parentNode.removeChild(m)}})}function d(k,n){var m=$(k).get()[0];if(m){m=m.getElementsByTagName("option");for(var l=0;l<m.length;l++){if(m[l].value==n){$(k).get()[0].selectedIndex=l;f(k);break}}}}return{init_city:function(o,n){var m=this;$(j).append('<option value="0">城市</option>');for(var k=0;k<g.length;k++){var l=g[k].split("|")[0];$(j).append('<option value="'+l+'">'+l+"</option>")}$(i).append('<option value="0">城区</option>');if(o){d(j,o);m.init_cityzone()}if(o&&n){d(i,n)}},init_cityzone:function(){if($(j).val()!=0){f(j);for(var m=0;m<g.length;m++){var l=g[m].split("|"),o=l[0];if($(j).val()!=o){continue}var n=l[1].split(",");if($(j).val()==o){$(i).html("");$(i).append('<option value="0">请选择城区</option>');for(var k=0;k<n.length;k++){$(i).append('<option value="'+n[k]+'">'+n[k]+"</option>")}}}}},init:function(l,m){var k=this;k.init_city(h,e);$(j).change(k.init_cityzone);$(i).change(function(){var n=$(j).val()+" "+$(i).val();if(l){l(n)}});if(m){m()}}}};if(c&&c.widget){c.widget.Cityzone=b}})(window,GM);(function(a,d,c){var b=function(e){$(function(){if($(e).length==0){return}if(document.attachEvent){var f=function(){return false};d.body.attachEvent("onselectstart",f);d.body.attachEvent("oncontextmenu",f);d.body.attachEvent("oncopy",f);d.body.attachEvent("oncut",f);$(document).keydown(function(){if(event.ctrlKey&&event.keyCode==67){event.keyCode=0;event.returnValue=false}});if(d.selection){d.selection.empty();d.unselectable="on";d.documentElement.style.userSelect="none"}}else{$(e).each(function(g,h){h.style.cssText+="-moz-user-select:none;-webkit-user-select:none;"})}})};if(c&&c.widget){c.widget.detercopy=b;c.widget.detercopy(".J_NoCopy")}})(window,document,GM);(function(a,c){var b=function(e){var d={init:function(){return new d._bind(e)},_bind:function(f){var p={main:"",wrap:"",errorCls:"",holdTarget:"",holdAction:function(){},max:140};$.extend(p,f);for(var j in p){this[j]=p[j]}if(this.main==""||this.wrap==""){return}var m=this,h=$(m.main),g=$(m.wrap),k=$(m.holdTarget),n=m.errorCls,o=m.max;var l=function(){var i=parseInt(h.val().length),q;if(i<=o||i==0){g.removeClass(n);q="你还可以输入<font>"+(o-i)+"</font>字"}else{g.addClass(n);q="已超出<font>"+(i-o)+"</font>字"}k.unbind("click");k.bind("click",function(){if(i<=o){m.holdAction()}});g.html(q)};l();h.keyup(l)}};return d};if(c&&c.widget){c.widget.countdown=b}})(window,GM);(function(a,b){var c=function(f){if(!f){return}var d={q:"",markerhtml:"",name:"",target:"",width:210,height:270,drag:false,bar:true,revise:false,center:null,siteNo:null};$.extend(d,f);for(var e in d){this[e]=d[e]}};c.prototype={init:function(){var g=this,j=document.getElementById(g.target);function d(l){l.style.cssText+="width:"+g.width+"px;height:"+g.height+"px;border:1px solid #CCC;"}function e(l){l.parentNode.removeChild(l)}function i(n){if(g.bar){var l="";if(g.revise){l='<li style="float: left; display: block; margin: 0pt 10px;line-height:12px;font-size:12px;"><a style="color:#4077C7;" href="javascript:void(0);" class="J_EditMap">修订坐标</a></li>'}var m='<ul style="margin: 5px 0pt;width:210px;padding:0px;"><li style="float: left; display: block; margin: 0pt 10px;line-height:14px;font-size:12px;"><a style="color:#4077C7;" href="javascript:void(0);" class="J_LookBigMap">查看全图</a></li><li style="float: left; display: block; margin: 0pt 10px;line-height:14px;font-size:12px;"><a style="color:#4077C7;" href="javascript:void(0);" class="J_LookWay">公交/驾车</a></li>'+l+"</ul>";$("#"+n).after(m)}}function h(r,l,n,t){if(google){geocoder=new google.maps.Geocoder();var o=new google.maps.LatLng(l[1],l[0]);var u={zoom:15,center:o,mapTypeId:google.maps.MapTypeId.ROADMAP};var m=new google.maps.Map(r,u);var q=new google.maps.Marker({title:n,position:o,map:m,draggable:function(){if(g.drag){return true}return false}()});if(g.markerhtml!=""){var p=new google.maps.InfoWindow({content:g.markerhtml});p.open(m,q);google.maps.event.addListener(q,"click",function(){p.open(m,q)})}if(g.drag){function s(){var v=q.getPosition();$("#J_Coord").html('lat:<span id="J_Pa">'+v.Pa+'</span><br/>lng:<span id="J_Oa">'+v.Oa+"</span>")}google.maps.event.addListener(q,"dragend",function(){s()});s()}i(g.target)}}function k(){var l='<div style="position:relative;width:200px;height:200px;border:#ccc solid 2px;background:#fff;"><div style="margin-top:80px;font-size:12px;color:red;text-align:center;">对不起,没有可以查看的地图信息</div><a href="javascript:void(0);" class="J_OverlayClose" style="position:absolute;right:-10px;top:-10px;display:block;width:15px;height:15px;background:#000;color:#fff;line-height:15px;text-align:center;">&times</a></div>';b.tools.overlay.fire(l)}if(!g.center){if(google){geocoder=new google.maps.Geocoder();geocoder.geocode({address:g.q},function(n,m){if(m==google.maps.GeocoderStatus.OK){var l=n[0].geometry.location;g.center=[l.Pa,l.Oa];h(j,g.center,g.name,g.siteNo)}else{e(j)}})}}else{if(g.center){h(j,g.center,g.name,g.siteNo)}}d(j);$.overlay();var f=[".J_LookBigMap",".J_LookWay",".J_OverlayClose",".J_EditMap","#J_SqSub","#J_Esub"];$.each(f,function(l,m){$(m).die()});$(".J_LookBigMap").live("click",function(){if(g.coord||g.center){var l=new Date().valueOf(),m='<div style="position:relative;width:500px;height:500px;border:#ccc solid 2px;"><div id="J_Map_'+l+'" style="height:500px;"></div><a href="javascript:void(0);" class="J_OverlayClose" style="position:absolute;right:-10px;top:-10px;display:block;width:15px;height:15px;background:#000;color:#fff;line-height:15px;text-align:center;">&times</a></div>';b.tools.overlay.opacity(0.5);b.tools.overlay.fire(m);var n=new b.widget.map({q:g.q,markerhtml:g.markerhtml,target:"J_Map_"+l,width:500,height:500,bar:false,name:g.name,center:g.center,siteNo:g.siteNo}).init()}else{k()}});$(".J_LookWay").live("click",function(){if(g.coord||g.center){var l='<div style="position:relative;width:300px;height:100px;border:#ccc solid 2px;background:#fff;"><form action="http://ditu.google.cn/maps" method="get" target="_blank" style="padding: 10px; text-align: center;"><div style="color:#78A000; font-size: 14px; font-weight: bold;">请输入出发所在地</div><div style="margin: 10px 0pt;"><span style="margin-right: 10px;font-size:12px;">出发地</span><input type="text" name="saddr" value="" class="profile_box1"></div><div><input type="submit" value="确认" class="space_button"></div><input value="'+g.q+","+g.name+'" type="hidden" name="daddr"/></form><a href="javascript:void(0);" class="J_OverlayClose" style="position:absolute;right:-10px;top:-10px;display:block;width:15px;height:15px;background:#000;color:#fff;line-height:15px;text-align:center;">&times</a></div>';b.tools.overlay.opacity(0.5);b.tools.overlay.fire(l)}else{k()}});$(".J_OverlayClose").live("click",function(){b.tools.overlay.close()});$("#J_SqSub").live("click",function(){var l=$(this).attr("data-diget");var m=new b.widget.map({q:$("#J_Sq").val(),markerhtml:"拽我，拽我，确定准确的位置~",target:"J_Map_"+l,width:600,height:500,bar:false,drag:true,name:g.name,siteNo:g.siteNo}).init()});$(".J_EditMap").live("click",function(){if(g.coord||g.center){var l=new Date().valueOf(),m='<div style="position:relative;width:600px;height:500px;border:#ccc solid 2px;"><div id="J_Map_'+l+'" style="height:500px;""></div><a href="javascript:void(0);" class="J_OverlayClose" style="position:absolute;right:-10px;top:-10px;display:block;width:15px;height:15px;background:#000;color:#fff;line-height:15px;text-align:center;">&times</a><div style="background:#fff;width:150px;height:140px;padding:10px;position:absolute;left:-180px;top:150px;border:#ccc solid 1px;">搜索:<br><input type="text" id="J_Sq"/><br/>操作:<br><input type="button" data-diget="'+l+'" id="J_SqSub" value="搜索"/> <input type="button" id="J_Esub" value="保存坐标"/><br/>坐标:<br><span id="J_Coord" style="color:red;"></span></div></div>';b.tools.overlay.opacity(0);b.tools.overlay.fire(m);var n=new b.widget.map({q:g.q,markerhtml:"拽我，拽我，确定准确的位置~",target:"J_Map_"+l,width:600,height:500,bar:false,drag:true,name:g.name,center:g.center,siteNo:g.siteNo}).init()}else{k()}});$("#J_Esub").live("click",function(){if(confirm("确定保存当前标记位置为新场馆位置么？")){alert("siteNo:"+g.siteNo+",lat:"+$("#J_Pa").text()+",lng:"+$("#J_Oa").text())}})}};if(b&&b.widget){b.widget.map=c}})(window,GM);